[gd_scene load_steps=41 format=3 uid="uid://dilbi8764vhxj"]

[ext_resource type="Script" path="res://scripts/enemy/skeleton.gd" id="1_ts2lp"]
[ext_resource type="Texture2D" uid="uid://dja6yhvsgyhhd" path="res://resources/texture/enemy/skeleton.tres" id="2_ysbic"]
[ext_resource type="PackedScene" uid="uid://filx1s4b2dd2" path="res://scenes/enemy/state_machine/state_machine.tscn" id="3_d3mjq"]
[ext_resource type="AudioStream" uid="uid://slgiaty64ygu" path="res://assets/audio/kenney_impact-sounds/others/whoosh-6316.mp3" id="4_g3jca"]

[sub_resource type="AtlasTexture" id="AtlasTexture_l7af3"]
atlas = ExtResource("2_ysbic")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_70kmq"]
atlas = ExtResource("2_ysbic")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_geqae"]
atlas = ExtResource("2_ysbic")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ua1ni"]
atlas = ExtResource("2_ysbic")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_6xjai"]
atlas = ExtResource("2_ysbic")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_xcedi"]
atlas = ExtResource("2_ysbic")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_75elr"]
atlas = ExtResource("2_ysbic")
region = Rect2(384, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ib1bs"]
atlas = ExtResource("2_ysbic")
region = Rect2(448, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_hhdjt"]
atlas = ExtResource("2_ysbic")
region = Rect2(512, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_5hxwj"]
atlas = ExtResource("2_ysbic")
region = Rect2(576, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_k12ue"]
atlas = ExtResource("2_ysbic")
region = Rect2(640, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_pm05q"]
atlas = ExtResource("2_ysbic")
region = Rect2(704, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_3qa7r"]
atlas = ExtResource("2_ysbic")
region = Rect2(768, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_jys6j"]
atlas = ExtResource("2_ysbic")
region = Rect2(0, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_we276"]
atlas = ExtResource("2_ysbic")
region = Rect2(64, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_5p3uu"]
atlas = ExtResource("2_ysbic")
region = Rect2(128, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_c0xvj"]
atlas = ExtResource("2_ysbic")
region = Rect2(192, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ybgox"]
atlas = ExtResource("2_ysbic")
region = Rect2(0, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_1g2g2"]
atlas = ExtResource("2_ysbic")
region = Rect2(64, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_on1bf"]
atlas = ExtResource("2_ysbic")
region = Rect2(128, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_w4jxa"]
atlas = ExtResource("2_ysbic")
region = Rect2(192, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_nbdeq"]
atlas = ExtResource("2_ysbic")
region = Rect2(256, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_f6ech"]
atlas = ExtResource("2_ysbic")
region = Rect2(320, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_cyo5h"]
atlas = ExtResource("2_ysbic")
region = Rect2(384, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_x7tcr"]
atlas = ExtResource("2_ysbic")
region = Rect2(448, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_hmkcl"]
atlas = ExtResource("2_ysbic")
region = Rect2(512, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ddvgb"]
atlas = ExtResource("2_ysbic")
region = Rect2(576, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_210yt"]
atlas = ExtResource("2_ysbic")
region = Rect2(640, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ro4b4"]
atlas = ExtResource("2_ysbic")
region = Rect2(704, 128, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_snusx"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_l7af3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_70kmq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_geqae")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ua1ni")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6xjai")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xcedi")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_75elr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ib1bs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hhdjt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5hxwj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k12ue")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pm05q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3qa7r")
}],
"loop": true,
"name": &"attack",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_jys6j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_we276")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5p3uu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c0xvj")
}],
"loop": true,
"name": &"idle",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ybgox")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1g2g2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_on1bf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w4jxa")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nbdeq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f6ech")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cyo5h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x7tcr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hmkcl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ddvgb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_210yt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ro4b4")
}],
"loop": true,
"name": &"walk",
"speed": 12.0
}]

[sub_resource type="Animation" id="Animation_07mdj"]
resource_name = "attack"
length = 1.08334
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"attack"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667, 0.5, 0.583333, 0.666667, 0.75, 0.833333, 0.916667, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("../StateMachine")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.3332, 0.6664, 1.0829),
"transitions": PackedFloat32Array(1, 1, 1),
"values": [{
"args": ["attack", "cause_damage"],
"method": &"call_state_method"
}, {
"args": ["attack", "cause_damage"],
"method": &"call_state_method"
}, {
"args": ["attack", "check_player"],
"method": &"call_state_method"
}]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("../AudioStreamPlayer2D:playing")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0.3332, 0.666666),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, true]
}

[sub_resource type="Animation" id="Animation_a48nm"]
resource_name = "idle"
length = 0.500013
loop_mode = 1
step = 0.125
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"idle"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.125, 0.25, 0.375),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3]
}

[sub_resource type="Animation" id="Animation_0a10y"]
resource_name = "walk"
loop_mode = 1
step = 0.0833333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"walk"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0833333, 0.166667, 0.25, 0.333333, 0.416667, 0.5, 0.583333, 0.666667, 0.75, 0.833333, 0.916667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_t13au"]
_data = {
"attack": SubResource("Animation_07mdj"),
"idle": SubResource("Animation_a48nm"),
"walk": SubResource("Animation_0a10y")
}

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_er0vx"]
radius = 5.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2dyi6"]
size = Vector2(32, 30)

[node name="Skeleton" type="CharacterBody2D"]
collision_layer = 4
collision_mask = 2
script = ExtResource("1_ts2lp")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(2, -1)
sprite_frames = SubResource("SpriteFrames_snusx")
animation = &"idle"
metadata/_edit_lock_ = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="AnimatedSprite2D"]
libraries = {
"": SubResource("AnimationLibrary_t13au")
}
autoplay = "walk"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CapsuleShape2D_er0vx")
metadata/_edit_lock_ = true

[node name="StateMachine" parent="." node_paths=PackedStringArray("body", "attack_area") instance=ExtResource("3_d3mjq")]
body = NodePath("..")
state_status = {
"attack": false,
"chase": false,
"patrol": false
}
chase_speed = 75.0
vision_distance = 200
vision_position = Vector2(0, -10)
attack_area = NodePath("AttackArea")
metadata/_edit_lock_ = true

[node name="AttackArea" type="Area2D" parent="StateMachine"]
position = Vector2(18, -10)
collision_layer = 0
metadata/_edit_group_ = true
metadata/_edit_lock_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="StateMachine/AttackArea"]
shape = SubResource("RectangleShape2D_2dyi6")
debug_color = Color(0.938602, 0.0734551, 0.586029, 0.42)
metadata/_edit_lock_ = true

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("4_g3jca")
volume_db = -5.0
pitch_scale = 1.1
panning_strength = 5.0
metadata/_edit_lock_ = true

[connection signal="direction_changed" from="." to="." method="_on_direction_changed"]
